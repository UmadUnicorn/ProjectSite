{% extends 'core/base.html' %}
{% block title %}{{ project.title }}{% endblock %}

{% block content %}
<h2>{{ project.title }}</h2>

<div style="margin-bottom: 20px; display: flex; gap: 10px;">
    <button class="btn" onclick="togglePassport()">üìÑ –ü–∞—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞</button>
    <a class="btn" href="{% url 'project_edit' project.pk %}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
</div>

<div id="passport" class="section passport-wrapper">
    <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ project.description }}</p>
    <p><strong>–ü—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∏:</strong> {{ project.background }}</p>
    <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {{ project.status }}</p>
    <p><strong>–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å:</strong> {{ project.relevance }}</p>

    <h3>–¶–µ–ª—å</h3>
    <p>{{ project.goal }}</p>

    <h3>–ú–µ—Ç—Ä–∏–∫–∏</h3>
    {% if project.metrics %}
        <ul>
        {% for metric in project.metrics %}
            <li><strong>{{ metric.name }}</strong> ‚Äî —Ü–µ–ª—å: {{ metric.target }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>–ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –∑–∞–¥–∞–Ω—ã.</p>
    {% endif %}

    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
    <p>{{ project.results }}</p>

    <h3>–ö–æ–º–∞–Ω–¥–∞:</h3>
    {% if project.team %}
        <ul>
        {% for member in project.team %}
            <li>{{ member.fio }} ‚Äî {{ member.phone }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>–ù–µ—Ç –∫–æ–º–∞–Ω–¥—ã.</p>
    {% endif %}

    <h3>–°—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä—ã:</h3>
    <p><strong>–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è:</strong> {{ project.audience }}</p>
    <p><strong>–í–∏–¥ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:</strong> {{ project.event_type }}</p>

    <h3>–†–∏—Å–∫–∏:</h3>
    {% if project.risks %}
        <ul>
        {% for risk in project.risks %}
            <li>{{ risk.risk }} ‚Äî –≤–ª–∏—è–Ω–∏–µ: {{ risk.impact }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>–ù–µ—Ç —Ä–∏—Å–∫–æ–≤.</p>
    {% endif %}

    <h3>–†–µ—Å—É—Ä—Å—ã:</h3>
    <p><strong>–ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ:</strong> {{ project.material_resources }}</p>
    <p><strong>–ù–µ–º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ:</strong> {{ project.non_material_resources }}</p>
</div>

<hr>

<div class="section">
    <h3>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
    <a class="btn" href="{% url 'event_create' project.pk %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</a>
    <ul style="margin-top: 15px;">
        {% for event in project.events.all %}
            <li style="margin-bottom: 10px;">
                {{ event.date|date:"d E Y H:i" }} ‚Äî {{ event.name }}
                <a class="btn" style="margin-left: 10px;" href="{% url 'event_detail' project.pk event.pk %}">‚úèÔ∏è –û—Ç—á—ë—Ç</a>
            </li>
        {% empty %}
            <li>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –ø–æ–∫–∞ –Ω–µ—Ç.</li>
        {% endfor %}
    </ul>
</div>

<script>
    function togglePassport() {
        const div = document.getElementById('passport');
        div.classList.toggle('open');
    }
</script>
{% endblock %}
